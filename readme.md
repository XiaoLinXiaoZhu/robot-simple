# 四足机器人项目

这是一个基于Arduino UNO的四足机器人项目，实现了多种运动模式和交互功能。

## 项目概述

该四足机器人基于Arduino UNO控制系统，通过8个舵机实现四足的灵活运动。机器人具备多种运动模式和手势表达能力，并配备了超声波传感器用于障碍物检测。

## 硬件配置

### 主要组件

- **主控板**：Arduino UNO
- **扩展板**：Gravity: IO Expansion & Motor Driver Shield
- **显示器**：SH1106_128X32_VISIONOX_HW_I2C
- **传感器**：超声波传感器
- **执行器**：8个舵机（前后腿各4个）

### 接线图

```
舵机引脚连接示意图：
__________ __________ _________________
|(pin9)_____)(pin8)  (pin2)(______(pin3)|  // 前腿舵机连接
|__|       |left FRONT right|        |__|
        |                |
        |                |
        |                |               // 身体部分
_________ |                | __________
|(pin7)_____)(pin6)__(pin4)(______(pin5)|  // 后腿舵机连接
|__|                                 |__|

超声波传感器：
TRIGGER引脚 - 12
ECHO引脚    - 11

蜂鸣器引脚 - 13（未实现）
```

## 功能特点

1. **运动模式**：自动模式、前进、左转、右转
2. **特殊动作**：舞蹈
3. **表情显示**：开心、悲伤、害怕等情绪表达
4. **距离感知**：通过超声波传感器实现障碍物检测
5. **校准功能**：支持各舵机偏移量校准并永久存储

## 控制指令

通过串口发送以下指令可以控制机器人的行为：

| 指令 | 参数1           | 参数2    | 说明                                                  |
| ---- | --------------- | -------- | ----------------------------------------------------- |
| S    |                 |          | 停止所有运动                                          |
| M    |                 |          | Move 开始进行前进动作                                 |
| A    |                 |          | Auto 自动模式，根据超声波传感器数据自动前进或左右转弯 |
| R    |                 |          | 右转                                                  |
| L    |                 |          | 左转                                                  |
| C    | 舵机编号（0-7） | 偏移量   | 校准舵机偏移量（存储在EEPROM中）                      |
| V    | 舵机编号（0-7） | 是否反转 | 设置舵机是否反转（0或1）                              |
| U    |                 |          | 测试并输出 超声波传感器数据                           |
| T    | 舵机编号（0-7） | 角度     | 设置舵机到指定角度（0-180）                           |


## 使用示例

在串口监视器中输入以下命令：

```
M  // 开始前进
A  // 自动模式，根据环境感知前进或转弯
R  // 右转
```

## 舵机正反转及偏移量参考

使用 `V` 指令可以设置舵机的正反转状态，使用 `C` 指令可以校准舵机偏移量。

设置的偏移量将会被存储在EEPROM中，下次启动时会自动加载。

当默认状态下，舵机的旋转情况应该为：
1. 对于 大臂（hip）舵机，当虚拟角度（输入的角度，而不是实际舵机角度）增加时，从俯视角观察，舵机应该逆时针旋转。
对于 大臂（hip）舵机，当虚拟角度减少时，从俯视角观察，舵机应该顺时针旋转。
2. 对于 小臂（leg）舵机，当虚拟角度（输入的角度，而不是实际舵机角度）增加时，腿部应该“下降”。
对于 小臂（leg）舵机，当虚拟角度减少时，腿部应该“抬升”。

当默认状态下时，各个舵机的初始位置应该符合以下要求：
1. 整体呈现对称状态，前后脚能够视为一个X形状（旋转对称）。
2. 足部（leg）应该垂直于地面，能够支撑机器人站立。